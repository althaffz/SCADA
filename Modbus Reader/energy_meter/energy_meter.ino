#define controlPin 3
bool print_en;


void setup() {
  Serial.begin(9600);
  Serial1.begin(9600);
  pinMode(controlPin, OUTPUT);
}

void loop() {
  //kVAh
  Serial.print("kVAh: ");
  read_modbus(0x01, 0x04, 0x00, 0x3D, 0x00, 0x01,0xA0, 0x06);
  

  //Power factor
  Serial.print("Power factor: ");
  read_modbus(0x01, 0x04, 0x00, 0x31, 0x00, 0x01, 0x60, 0x05);

  //kVArh
  Serial.print("kVArh: ");
  read_modbus(0x01, 0x04, 0x00, 0x3F, 0x00, 0x01,0x01, 0xC6);

  Serial.print("avg_current");
  read_modbus(0x01,0x04,0x00,0x17,0x00,0x01,0x81,0xCE);

  Serial.print("avg_voltage LN");
  read_modbus(0x01,0x04,0x00,0x07,0x0,0x01,0x80,0x0B);

  Serial.print("kw");
  read_modbus(0x01,0x04,0x00,0x2B,0x00,0x01,0x41,0xC2);

  Serial.print("kwh");
  read_modbus(0x01,0x04,0x00,0x3B,0x00,0x01,0x40,0x07);

  Serial.println("******************************************************************************************");
}


